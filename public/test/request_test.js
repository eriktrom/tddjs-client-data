// Generated by CoffeeScript 1.6.1
/*
- get to know the XMLHttpRequest better by creating an api that abstracts it
  between browsers
- introduction to the concept of stubbing
- understand how to deal with dependencies in javascript
- know what would have been helpful to automate, for next time
*/

(function() {
  var ajax;
  ajax = tddjs.ajax;
  module("Get Request", {
    setup: function() {
      return this.ajaxCreate = ajax.create;
    },
    teardown: function() {
      return ajax.create = this.ajaxCreate;
    }
  });
  test("it should define get method", function() {
    return ok(typeof ajax.get === "function");
  });
  test("it should throw error without url", function() {
    return throws(function() {
      return ajax.get();
    }, TypeError);
  });
  test("it should obtain an XMLHttpRequest object", function() {
    var openStub;
    openStub = stubFn({
      open: function() {}
    });
    ajax.create = openStub;
    ajax.get("/url");
    return ok(ajax.create.called);
  });
  return test("it should call open with method, url, async flag", function() {
    var openStub, url;
    openStub = stubFn();
    ajax.create = stubFn({
      open: openStub
    });
    url = "/url";
    ajax.get(url);
    return deepEqual(openStub.args, ["GET", url, true]);
  });
})();
